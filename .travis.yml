language: rust
cache: cargo
rust:
  - stable
  - beta
  - nightly

matrix:
  include:
  - name: "rust-fmt"
    rust: 1.41.0
    install:
      - rustup component add rustfmt-preview
    script:
      - cargo fmt -- --check
  - name: "rust-clippy"
    rust: 1.41.0
    install:
      - rustup component add clippy-preview
    script:
      - cargo clippy --all-features -- -D clippy::all
  - name: "rust-warn"
    env: RUSTFLAGS="-D warnings"
    rust: stable
    script:
      - cargo check --tests

jobs:
  allow_failures:
    - rust: nightly
    - name: "rust-warn"

script:
  - cargo build --all
  - cargo test -p papergrid
  - cargo test --all

